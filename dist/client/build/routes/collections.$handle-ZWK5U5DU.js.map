{
  "version": 3,
  "sources": ["../../../../app/components/ProductGrid.jsx", "../../../../app/components/ProductCard.jsx", "../../../../app/routes/collections.$handle.jsx"],
  "sourcesContent": ["import {useFetcher} from '@remix-run/react';\r\nimport {useEffect, useState} from 'react';\r\nimport ProductCard from './ProductCard';\r\n\r\nexport default function ProductGrid({collection, url}) {\r\n  const [nextPage, setNextPage] = useState(\r\n    collection.products.pageInfo.hasNextPage,\r\n  );\r\n\r\n  const [endCursor, setEndCursor] = useState(\r\n    collection.products.pageInfo.endCursor,\r\n  );\r\n\r\n  const [products, setProducts] = useState(collection.products.nodes || []);\r\n\r\n  // For making client-side requests\r\n  // https://remix.run/docs/en/v1/hooks/use-fetcher\r\n  const fetcher = useFetcher();\r\n\r\n  function fetchMoreProducts() {\r\n    // ?index differentiates index routes from their parent layout routes\r\n    // https://remix.run/docs/en/v1/guides/routing#what-is-the-index-query-param\r\n    fetcher.load(`${url}?index&cursor=${endCursor}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!fetcher.data) return;\r\n    const {collection} = fetcher.data;\r\n\r\n    setProducts((prev) => [...prev, ...collection.products.nodes]);\r\n    setNextPage(collection.products.pageInfo.hasNextPage);\r\n    setEndCursor(collection.products.pageInfo.endCursor);\r\n  }, [fetcher.data]);\r\n\r\n  return (\r\n    <section className=\"w-full gap-4 md:gap-8 grid\">\r\n      <div className=\"grid-flow-row grid gap-2 gap-y-6 md:gap-4 lg:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\r\n        {products.map((product) => (\r\n          <ProductCard key={product.id} product={product} />\r\n        ))}\r\n      </div>\r\n      {nextPage && (\r\n        <div className=\"flex items-center justify-center mt-6\">\r\n          <button\r\n            className=\"inline-block rounded font-medium text-center py-3 px-6 border w-full cursor-pointer\"\r\n            disabled={fetcher.state !== 'idle'}\r\n            onClick={fetchMoreProducts}\r\n          >\r\n            {fetcher.state !== 'idle' ? 'Loading...' : 'Load more products'}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n", "import {Link} from '@remix-run/react';\r\nimport {Image, Money} from '@shopify/hydrogen';\r\n\r\nexport default function ProductCard({product}) {\r\n  const {price, compareAtPrice} = product.variants?.nodes[0] || {};\r\n  const isDiscounted = compareAtPrice?.amount > price?.amount;\r\n\r\n  return (\r\n    <Link to={`/products/${product.handle}`}>\r\n      <div className=\"grid gap-6\">\r\n        <div className=\"shadow-sm rounded relative\">\r\n          {isDiscounted && (\r\n            <label className=\"subpixel-antialiased absolute top-0 right-0 m-4 text-right text-notice text-red-600 text-xs\">\r\n              Sale\r\n            </label>\r\n          )}\r\n          <Image\r\n            data={product.variants.nodes[0].image}\r\n            alt={product.title}\r\n          />\r\n        </div>\r\n        <div className=\"grid gap-1\">\r\n          <h3 className=\"max-w-prose text-copy w-full overflow-hidden whitespace-nowrap text-ellipsis \">\r\n            {product.title}\r\n          </h3>\r\n          <div className=\"flex gap-4\">\r\n            <span className=\"max-w-prose whitespace-pre-wrap inherit text-copy flex gap-4\">\r\n              <Money withoutTrailingZeros data={price} />\r\n              {isDiscounted && (\r\n                <Money\r\n                  className=\"line-through opacity-50\"\r\n                  withoutTrailingZeros\r\n                  data={compareAtPrice}\r\n                />\r\n              )}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n", "import {useLoaderData} from '@remix-run/react';\r\nimport {json} from '@shopify/remix-oxygen';\r\nimport ProductGrid from '../components/ProductGrid';\r\n\r\nconst seo = ({data}) => ({\r\n  title: data?.collection?.title,\r\n  description: data?.collection?.description.substr(0, 154),\r\n});\r\n\r\nexport const handle = {\r\n  seo,\r\n};\r\n\r\nexport async function loader({params, context, request}) {\r\n  const {handle} = params;\r\n  const searchParams = new URL(request.url).searchParams;\r\n  const cursor = searchParams.get('cursor');\r\n\r\n  const {collection} = await context.storefront.query(COLLECTION_QUERY, {\r\n    variables: {\r\n      handle,\r\n      cursor,\r\n    },\r\n  });\r\n\r\n  // Handle 404s\r\n  if (!collection) {\r\n    throw new Response(null, {status: 404});\r\n  }\r\n\r\n  // json is a Remix utility for creating application/json responses\r\n  // https://remix.run/docs/en/v1/utils/json\r\n  return json({\r\n    collection,\r\n  });\r\n}\r\n\r\nexport function meta({data}){\r\n  return [\r\n    {title: data?.collection?.title ?? 'Collection'},\r\n    {description: data?.collection?.description},\r\n  ];\r\n};\r\n\r\nexport default function Collection() {\r\n  const {collection} = useLoaderData();\r\n  return (\r\n    <>\r\n      <header className=\"grid w-full gap-8 py-8 justify-items-start\">\r\n        <h1 className=\"text-4xl whitespace-pre-wrap font-bold inline-block\">\r\n          {collection.title}\r\n        </h1>\r\n\r\n        {collection.description && (\r\n          <div className=\"flex items-baseline justify-between w-full\">\r\n            <div>\r\n              <p className=\"max-w-md whitespace-pre-wrap inherit text-copy inline-block\">\r\n                {collection.description}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n      <ProductGrid\r\n        collection={collection}\r\n        url={`/collections/${collection.handle}`}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nconst COLLECTION_QUERY = `#graphql\r\n  query CollectionDetails($handle: String!, $cursor: String) {\r\n    collection(handle: $handle) {\r\n      id\r\n      title\r\n      description\r\n      handle\r\n      products(first: 4, after: $cursor) {\r\n        pageInfo {\r\n          hasNextPage\r\n          endCursor\r\n        }\r\n        nodes {\r\n          id\r\n          title\r\n          publishedAt\r\n          handle\r\n          variants(first: 1) {\r\n            nodes {\r\n              id\r\n              image {\r\n                url\r\n                altText\r\n                width\r\n                height\r\n              }\r\n              price {\r\n                amount\r\n                currencyCode\r\n              }\r\n              compareAtPrice {\r\n                amount\r\n                currencyCode\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],
  "mappings": "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",
  "names": ["import_react", "import_jsx_dev_runtime", "collection", "import_jsx_dev_runtime"]
}
